{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StickyForm = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _Types = require(\"./Types\");\n\nvar _reactNative = require(\"react-native\");\n\nvar _LargeList = require(\"./LargeList\");\n\nvar _idx = require(\"./idx\");\n\nvar _jsxFileName = \"C:\\\\Users\\\\ADMINS\\\\Desktop\\\\GreenApp\\\\CoffeXanh\\\\node_modules\\\\react-native-largelist-v3\\\\StickyForm.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar StickyForm = function (_React$PureComponent) {\n  (0, _inherits2.default)(StickyForm, _React$PureComponent);\n\n  var _super = _createSuper(StickyForm);\n\n  function StickyForm(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, StickyForm);\n    _this = _super.call(this, props);\n    _this._contentOffsetY = 0;\n    _this._largeList = _react.default.createRef();\n\n    _this._renderHeader = function () {\n      var renderHeader = _this.props.renderHeader;\n      if (!renderHeader || !renderHeader()) return null;\n      return _this._stickyFirstView(_this.props.renderHeader());\n    };\n\n    _this._renderFooter = function () {\n      var renderFooter = _this.props.renderFooter;\n      if (!renderFooter || !renderFooter()) return null;\n      return _this._stickyFirstView(renderFooter());\n    };\n\n    _this._renderSection = function (section) {\n      return _this._stickyFirstView(_this.props.renderSection(section));\n    };\n\n    _this._renderIndexPath = function (path) {\n      return _this._stickyFirstView(_this.props.renderIndexPath(path));\n    };\n\n    _this.obtainOffset();\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(StickyForm, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(props) {\n      if (props.onNativeContentOffsetExtract && this.props.onNativeContentOffsetExtract !== props.onNativeContentOffsetExtract) {\n        this.obtainOffset();\n      }\n    }\n  }, {\n    key: \"obtainOffset\",\n    value: function obtainOffset() {\n      this._nativeOffset = _objectSpread({\n        x: new _reactNative.Animated.Value(0)\n      }, this.props.onNativeContentOffsetExtract);\n      this._offset = this._nativeOffset.x;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react.default.createElement(_LargeList.LargeList, (0, _extends2.default)({}, this.props, {\n        ref: this._largeList,\n        renderHeader: this._renderHeader,\n        renderSection: this._renderSection,\n        renderIndexPath: this._renderIndexPath,\n        renderFooter: this._renderFooter,\n        onNativeContentOffsetExtract: this._nativeOffset,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 7\n        }\n      }));\n    }\n  }, {\n    key: \"_stickyFirstView\",\n    value: function _stickyFirstView(view) {\n      var _this2 = this;\n\n      var childArray = _react.default.Children.toArray(view.props.children);\n\n      if (!childArray || childArray.length < 1) return null;\n      var sticky = childArray[0];\n\n      var style = _reactNative.StyleSheet.flatten([sticky.props.style, {\n        zIndex: 9999,\n        transform: [{\n          translateX: this._offset.interpolate({\n            inputRange: [-1, 0, 1],\n            outputRange: [0, 0, 1]\n          })\n        }]\n      }]);\n\n      return _react.default.cloneElement(view, null, childArray.map(function (v, index) {\n        if (index > 0) return _react.default.cloneElement(v, {\n          key: index\n        });\n        return _react.default.createElement(_reactNative.Animated.View, (0, _extends2.default)({}, v.props, {\n          style: style,\n          key: index,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 16\n          }\n        }));\n      }));\n    }\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(offset) {\n      var animated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (!this._largeList.current) return Promise.reject(\"StickyForm has not been initialized yet!\");\n      return this._largeList.current.scrollTo(offset, animated).then(function () {\n        return Promise.resolve();\n      });\n    }\n  }, {\n    key: \"endRefresh\",\n    value: function endRefresh() {\n      var _this3 = this;\n\n      (0, _idx.idx)(function () {\n        return _this3._largeList.current.endRefresh();\n      });\n    }\n  }, {\n    key: \"endLoading\",\n    value: function endLoading() {\n      var _this4 = this;\n\n      (0, _idx.idx)(function () {\n        return _this4._largeList.current.endLoading();\n      });\n    }\n  }]);\n  return StickyForm;\n}(_react.default.PureComponent);\n\nexports.StickyForm = StickyForm;\nStickyForm.defaultProps = {\n  directionalLockEnabled: true,\n  headerStickyEnabled: true\n};","map":{"version":3,"sources":["C:/Users/ADMINS/Desktop/GreenApp/CoffeXanh/node_modules/react-native-largelist-v3/StickyForm.js"],"names":["StickyForm","props","_contentOffsetY","_largeList","React","createRef","_renderHeader","renderHeader","_stickyFirstView","_renderFooter","renderFooter","_renderSection","section","renderSection","_renderIndexPath","path","renderIndexPath","obtainOffset","onNativeContentOffsetExtract","_nativeOffset","x","Animated","Value","_offset","view","childArray","Children","toArray","children","length","sticky","style","StyleSheet","flatten","zIndex","transform","translateX","interpolate","inputRange","outputRange","cloneElement","map","v","index","key","offset","animated","current","Promise","reject","scrollTo","then","resolve","endRefresh","endLoading","PureComponent","defaultProps","directionalLockEnabled","headerStickyEnabled"],"mappings":"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","sourcesContent":["/*\n *\n * Created by Stone\n * https://github.com/bolan9999\n * Email: shanshang130@gmail.com\n * Date: 2019/2/23\n *\n */\n\nimport React from \"react\";\nimport { StickyFormPropType } from \"./Types\";\nimport type {IndexPath, LargeListPropType, Offset, Size} from \"./Types\";\nimport { Animated, StyleSheet } from \"react-native\";\nimport { LargeList } from \"./LargeList\";\nimport {idx} from \"./idx\";\n\nexport class StickyForm extends React.PureComponent<StickyFormPropType> {\n  _size: Size;\n  _contentOffsetY = 0;\n  _nativeOffset;\n  _offset: Animated.Value;\n  _largeList=React.createRef();\n\n  constructor(props) {\n    super(props);\n    this.obtainOffset();\n  }\n\n  UNSAFE_componentWillReceiveProps(props: LargeListPropType) {\n    if (\n      props.onNativeContentOffsetExtract &&\n      this.props.onNativeContentOffsetExtract !== props.onNativeContentOffsetExtract\n    ) {\n      this.obtainOffset();\n    }\n  }\n\n  obtainOffset() {\n    this._nativeOffset = {\n      x: new Animated.Value(0),\n      ...this.props.onNativeContentOffsetExtract\n    };\n    this._offset = this._nativeOffset.x;\n  }\n  render() {\n    return (\n      <LargeList\n        {...this.props}\n        ref={this._largeList}\n        renderHeader={this._renderHeader}\n        renderSection={this._renderSection}\n        renderIndexPath={this._renderIndexPath}\n        renderFooter={this._renderFooter}\n        onNativeContentOffsetExtract={this._nativeOffset}\n      />\n    );\n  }\n\n  _renderHeader = () => {\n    const { renderHeader } = this.props;\n    if (!renderHeader || !renderHeader()) return null;\n    return this._stickyFirstView(this.props.renderHeader());\n  };\n\n  _renderFooter = () => {\n    const { renderFooter } = this.props;\n    if (!renderFooter || !renderFooter()) return null;\n    return this._stickyFirstView(renderFooter());\n  };\n\n  _renderSection = (section: number) => {\n    return this._stickyFirstView(this.props.renderSection(section));\n  };\n\n  _renderIndexPath = (path: IndexPath) => {\n    return this._stickyFirstView(this.props.renderIndexPath(path));\n  };\n\n  _stickyFirstView(view: React.ReactElement<any>) {\n    const childArray = React.Children.toArray(view.props.children);\n    if (!childArray || childArray.length < 1) return null;\n    const sticky: any = childArray[0];\n    const style = StyleSheet.flatten([\n      sticky.props.style,\n      {\n        zIndex: 9999,\n        transform: [{ translateX: this._offset.interpolate({ inputRange: [-1, 0, 1], outputRange: [0, 0, 1] }) }]\n      }\n    ]);\n    return React.cloneElement(\n      view,\n      null,\n      childArray.map((v, index) => {\n        if (index > 0) return React.cloneElement(v, { key: index });\n        return <Animated.View {...v.props} style={style} key={index} />;\n      })\n    );\n  }\n\n  scrollTo(offset: Offset, animated: boolean = true): Promise<void> {\n    if (!this._largeList.current) return Promise.reject(\"StickyForm has not been initialized yet!\");\n    return this._largeList.current.scrollTo(offset, animated).then(() => {\n      return Promise.resolve();\n    });\n  }\n\n  endRefresh() {\n    idx(() => this._largeList.current.endRefresh());\n  }\n\n  endLoading() {\n    idx(() => this._largeList.current.endLoading());\n  }\n\n  static defaultProps = {\n    directionalLockEnabled: true,\n    headerStickyEnabled: true\n  };\n}\n"]},"metadata":{},"sourceType":"script"}