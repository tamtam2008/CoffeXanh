{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _XModal = _interopRequireDefault(require(\"../../../../../components/layout/XModal\"));\n\nvar _XButton = _interopRequireDefault(require(\"../../../../../components/XButton\"));\n\nvar _XButton2 = _interopRequireDefault(require(\"../../../../../components/XButton2\"));\n\nvar _BaseStyles = require(\"../../../../../constants/BaseStyles\");\n\nvar _Layout = _interopRequireDefault(require(\"../../../../../constants/Layout\"));\n\nvar _asyncStorage = _interopRequireDefault(require(\"@react-native-community/async-storage\"));\n\nvar _SessionUtils = _interopRequireDefault(require(\"../../../../../session/SessionUtils\"));\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\ADMINS\\\\Desktop\\\\GreenApp\\\\CoffeXanh\\\\src\\\\screens\\\\root\\\\menu\\\\components\\\\LocationPermissionPopup\\\\LocationPermissionPopup.js\";\n\nvar LocationPermissionPopup = function LocationPermissionPopup(_ref) {\n  var visible = _ref.visible,\n      cancelAction = _ref.cancelAction;\n  var requestLocationPermission = (0, _react.useCallback)(function _callee() {\n    var status;\n    return _regenerator.default.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regenerator.default.awrap(_reactNative.PermissionsAndroid.request(_reactNative.PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION));\n\n          case 3:\n            status = _context.sent;\n\n            if (status === 'granted') {\n              console.warn('have permission');\n            }\n\n            _asyncStorage.default.setItem(_reactNative.PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION, status).then(function () {\n              _SessionUtils.default.setConfig({\n                locationPermission: status === 'granted'\n              });\n            });\n\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            console.log('LocationPermissionPopup', JSON.stringify(_context.t0));\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  }, []);\n  return _react.default.createElement(_XModal.default, {\n    visible: visible,\n    onClose: cancelAction,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: [_BaseStyles.BaseStyles.baseContainer, _BaseStyles.BaseStyles.flexColumn, styles.popup],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: [_BaseStyles.BaseFontStyles.title, styles.body],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, \"Th\\xF4ng b\\xE1o\"), _react.default.createElement(_reactNative.Text, {\n    style: [_BaseStyles.BaseFontStyles.body1, _BaseStyles.BaseStyles.mt_16, styles.body],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, \"\\u0110\\u1EC3 tr\\u1EA3i nghi\\u1EC7m c\\u1EE7a b\\u1EA1n tr\\xEAn s\\u1EA3n ph\\u1EA9m c\\u1EE7a ch\\xFAng t\\xF4i \\u0111\\u01B0\\u1EE3c t\\u1ED1t h\\u01A1n. Ch\\xFAng t\\xF4i c\\u1EA7n b\\u1EA1n c\\u1EA5p ph\\xE9p cho s\\u1EED d\\u1EE5ng quy\\u1EC1n truy c\\u1EADp v\\u1ECB tr\\xED tr\\xEAn thi\\u1EBFt b\\u1ECB c\\u1EE7a b\\u1EA1n.\"), _react.default.createElement(_reactNative.View, {\n    style: [_BaseStyles.BaseStyles.flexRow, _BaseStyles.BaseStyles.mt_24, styles.buttonContainer],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_XButton2.default, {\n    onPress: function onPress() {\n      cancelAction();\n\n      _asyncStorage.default.setItem(_reactNative.PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION, 'denied');\n    },\n    style: styles.button,\n    title: 'Đóng',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }), _react.default.createElement(_XButton.default, {\n    onPress: function onPress() {\n      cancelAction();\n      requestLocationPermission();\n    },\n    style: styles.button,\n    title: 'Đồng ý',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }))));\n};\n\nvar _default = LocationPermissionPopup;\nexports.default = _default;\n\nvar styles = _reactNative.StyleSheet.create({\n  centeredView: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(83,82,82,0.9)'\n  },\n  popup: {\n    width: _Layout.default.window.width - 32,\n    backgroundColor: '#fff',\n    borderRadius: 5\n  },\n  body: {\n    textAlign: 'center'\n  },\n  buttonContainer: {\n    justifyContent: 'space-around',\n    alignItems: 'center'\n  },\n  button: {\n    width: '40%'\n  }\n});","map":{"version":3,"sources":["C:/Users/ADMINS/Desktop/GreenApp/CoffeXanh/src/screens/root/menu/components/LocationPermissionPopup/LocationPermissionPopup.js"],"names":["LocationPermissionPopup","visible","cancelAction","requestLocationPermission","PermissionsAndroid","request","PERMISSIONS","ACCESS_FINE_LOCATION","status","console","warn","AsyncStorage","setItem","then","SessionUtils","setConfig","locationPermission","log","JSON","stringify","BaseStyles","baseContainer","flexColumn","styles","popup","BaseFontStyles","title","body","body1","mt_16","flexRow","mt_24","buttonContainer","button","StyleSheet","create","centeredView","flex","justifyContent","alignItems","backgroundColor","width","Layout","window","borderRadius","textAlign"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\r\nimport { PermissionsAndroid, StyleSheet, Text, View } from 'react-native';\r\nimport XModal from '../../../../../components/layout/XModal';\r\nimport XButton from '../../../../../components/XButton';\r\nimport XButton2 from '../../../../../components/XButton2';\r\nimport {\r\n  BaseFontStyles,\r\n  BaseStyles,\r\n} from '../../../../../constants/BaseStyles';\r\nimport Layout from '../../../../../constants/Layout';\r\nimport AsyncStorage from '@react-native-community/async-storage';\r\nimport SessionUtils from '../../../../../session/SessionUtils';\r\n\r\nconst LocationPermissionPopup = ({ visible, cancelAction }) => {\r\n  const requestLocationPermission = useCallback(async () => {\r\n    try {\r\n      const status = await PermissionsAndroid.request(\r\n        PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,\r\n      );\r\n      if (status === 'granted') {\r\n        console.warn('have permission');\r\n      }\r\n      AsyncStorage.setItem(\r\n        PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,\r\n        status,\r\n      ).then(() => {\r\n        SessionUtils.setConfig({ locationPermission: status === 'granted' });\r\n      });\r\n    } catch (err) {\r\n      console.log('LocationPermissionPopup', JSON.stringify(err));\r\n      // console.error('can not approve permission');\r\n    }\r\n  }, []);\r\n  return (\r\n    <XModal visible={visible} onClose={cancelAction}>\r\n      <View\r\n        style={[BaseStyles.baseContainer, BaseStyles.flexColumn, styles.popup]}>\r\n        <Text style={[BaseFontStyles.title, styles.body]}>Thông báo</Text>\r\n        <Text style={[BaseFontStyles.body1, BaseStyles.mt_16, styles.body]}>\r\n          Để trải nghiệm của bạn trên sản phẩm của chúng tôi được tốt hơn. Chúng\r\n          tôi cần bạn cấp phép cho sử dụng quyền truy cập vị trí trên thiết bị\r\n          của bạn.\r\n        </Text>\r\n        <View\r\n          style={[\r\n            BaseStyles.flexRow,\r\n            BaseStyles.mt_24,\r\n            styles.buttonContainer,\r\n          ]}>\r\n          <XButton2\r\n            onPress={() => {\r\n              cancelAction();\r\n              AsyncStorage.setItem(\r\n                PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,\r\n                'denied',\r\n              );\r\n            }}\r\n            style={styles.button}\r\n            title={'Đóng'}\r\n          />\r\n          <XButton\r\n            onPress={() => {\r\n              cancelAction();\r\n              requestLocationPermission();\r\n            }}\r\n            style={styles.button}\r\n            title={'Đồng ý'}\r\n          />\r\n        </View>\r\n      </View>\r\n    </XModal>\r\n  );\r\n};\r\n\r\nexport default LocationPermissionPopup;\r\n\r\nconst styles = StyleSheet.create({\r\n  centeredView: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: 'rgba(83,82,82,0.9)',\r\n  },\r\n  popup: {\r\n    width: Layout.window.width - 32,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 5,\r\n  },\r\n  body: {\r\n    textAlign: 'center',\r\n  },\r\n  buttonContainer: {\r\n    justifyContent: 'space-around',\r\n    alignItems: 'center',\r\n  },\r\n  button: {\r\n    width: '40%',\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"script"}