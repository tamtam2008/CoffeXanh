{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _ajax = require(\"rxjs/ajax\");\n\nvar _AjaxObservable = require(\"rxjs/internal/observable/dom/AjaxObservable\");\n\nvar _operators = require(\"rxjs/operators\");\n\nvar _ServiceUtils = _interopRequireDefault(require(\"./ServiceUtils\"));\n\nvar _useRootNavigation = _interopRequireDefault(require(\"../../utils/useRootNavigation\"));\n\nvar _rxjs = require(\"rxjs\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar navigation = (0, _useRootNavigation.default)();\n\nvar request = function request(url, method, body, headers, params) {\n  console.log('HTTPCLIENT.REQUEST', method, url, 'headers:', headers, 'body:', JSON.stringify(body), 'params', params);\n  return (0, _ajax.ajax)(_objectSpread(_objectSpread({}, {\n    url: encodeURI(\"\" + url + _ServiceUtils.default.buildParams(params)),\n    method: method,\n    headers: headers,\n    body: body\n  }), {}, {\n    timeout: 15000\n  })).pipe((0, _operators.catchError)(function (e) {\n    if (e.status === 401) {\n      navigation.navigate('Auth', {\n        screen: 'login'\n      });\n    }\n\n    return (0, _rxjs.of)({\n      response: {\n        status: e.status,\n        message: e.message,\n        error: e.name,\n        result: 'fail'\n      },\n      fullError: e\n    });\n  }), (0, _operators.tap)(function (data) {\n    console.log('HTTPCLIENT.RESPONSE', method, url, JSON.stringify(data.response));\n  }));\n};\n\nvar HttpClient = {\n  get: function get(url, headers, params) {\n    return request(url, 'GET', null, headers, params);\n  },\n  put: function put(url, body, headers, params) {\n    return request(url, 'PUT', body, _objectSpread({\n      'Content-Type': 'application/json'\n    }, headers), params);\n  },\n  post: function post(url, body, headers, params) {\n    return request(url, 'POST', body, _objectSpread({\n      'Content-Type': 'application/json'\n    }, headers), params);\n  },\n  delete: function _delete(url, headers, params) {\n    return request(url, 'DELETE', null, headers, params);\n  }\n};\nvar _default = HttpClient;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/ADMINS/Desktop/GreenApp/CoffeXanh/src/services/utils/HttpClient.js"],"names":["navigation","request","url","method","body","headers","params","console","log","JSON","stringify","encodeURI","ServiceUtils","buildParams","timeout","pipe","e","status","navigate","screen","response","message","error","name","result","fullError","data","HttpClient","get","put","post","delete"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;AAEA,IAAMA,UAAU,GAAG,iCAAnB;;AACA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD,EAAMC,MAAN,EAAcC,IAAd,EAAoBC,OAApB,EAA6BC,MAA7B,EAAwC;AACtDC,EAAAA,OAAO,CAACC,GAAR,CACE,oBADF,EAEEL,MAFF,EAGED,GAHF,EAIE,UAJF,EAKEG,OALF,EAME,OANF,EAOEI,IAAI,CAACC,SAAL,CAAeN,IAAf,CAPF,EAQE,QARF,EASEE,MATF;AAWA,SAAO,gDACF;AACDJ,IAAAA,GAAG,EAAES,SAAS,MAAIT,GAAJ,GAAUU,sBAAaC,WAAb,CAAyBP,MAAzB,CAAV,CADb;AAEDH,IAAAA,MAAM,EAANA,MAFC;AAGDE,IAAAA,OAAO,EAAPA,OAHC;AAIDD,IAAAA,IAAI,EAAJA;AAJC,GADE;AAOLU,IAAAA,OAAO,EAAE;AAPJ,MAQJC,IARI,CASL,2BAAW,UAAAC,CAAC,EAAI;AACd,QAAIA,CAAC,CAACC,MAAF,KAAa,GAAjB,EAAsB;AACpBjB,MAAAA,UAAU,CAACkB,QAAX,CAAoB,MAApB,EAA4B;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAA5B;AACD;;AACD,WAAO,cAAG;AACRC,MAAAA,QAAQ,EAAE;AACRH,QAAAA,MAAM,EAAED,CAAC,CAACC,MADF;AAERI,QAAAA,OAAO,EAAEL,CAAC,CAACK,OAFH;AAGRC,QAAAA,KAAK,EAAEN,CAAC,CAACO,IAHD;AAIRC,QAAAA,MAAM,EAAE;AAJA,OADF;AAORC,MAAAA,SAAS,EAAET;AAPH,KAAH,CAAP;AASD,GAbD,CATK,EAuBL,oBAAI,UAAAU,IAAI,EAAI;AACVnB,IAAAA,OAAO,CAACC,GAAR,CACE,qBADF,EAEEL,MAFF,EAGED,GAHF,EAIEO,IAAI,CAACC,SAAL,CAAegB,IAAI,CAACN,QAApB,CAJF;AAMD,GAPD,CAvBK,CAAP;AAgCD,CA5CD;;AA8CA,IAAMO,UAAU,GAAG;AACjBC,EAAAA,GAAG,EAAE,aAAC1B,GAAD,EAAMG,OAAN,EAAeC,MAAf;AAAA,WAA0BL,OAAO,CAACC,GAAD,EAAM,KAAN,EAAa,IAAb,EAAmBG,OAAnB,EAA4BC,MAA5B,CAAjC;AAAA,GADY;AAEjBuB,EAAAA,GAAG,EAAE,aAAC3B,GAAD,EAAME,IAAN,EAAYC,OAAZ,EAAqBC,MAArB;AAAA,WACHL,OAAO,CACLC,GADK,EAEL,KAFK,EAGLE,IAHK;AAKH,sBAAgB;AALb,OAMAC,OANA,GAQLC,MARK,CADJ;AAAA,GAFY;AAajBwB,EAAAA,IAAI,EAAE,cAAC5B,GAAD,EAAME,IAAN,EAAYC,OAAZ,EAAqBC,MAArB;AAAA,WACJL,OAAO,CACLC,GADK,EAEL,MAFK,EAGLE,IAHK;AAKH,sBAAgB;AALb,OAMAC,OANA,GAQLC,MARK,CADH;AAAA,GAbW;AAwBjByB,EAAAA,MAAM,EAAE,iBAAC7B,GAAD,EAAMG,OAAN,EAAeC,MAAf;AAAA,WACNL,OAAO,CAACC,GAAD,EAAM,QAAN,EAAgB,IAAhB,EAAsBG,OAAtB,EAA+BC,MAA/B,CADD;AAAA;AAxBS,CAAnB;eA4BeqB,U","sourcesContent":["import { ajax } from 'rxjs/ajax';\r\nimport { ajaxPost } from 'rxjs/internal/observable/dom/AjaxObservable';\r\nimport { catchError, tap } from 'rxjs/operators';\r\nimport ServiceUtils from './ServiceUtils';\r\nimport useRootNavigation from '../../utils/useRootNavigation';\r\nimport { of } from 'rxjs';\r\n\r\nconst navigation = useRootNavigation();\r\nconst request = (url, method, body, headers, params) => {\r\n  console.log(\r\n    'HTTPCLIENT.REQUEST',\r\n    method,\r\n    url,\r\n    'headers:',\r\n    headers,\r\n    'body:',\r\n    JSON.stringify(body),\r\n    'params',\r\n    params,\r\n  );\r\n  return ajax({\r\n    ...{\r\n      url: encodeURI(`${url}${ServiceUtils.buildParams(params)}`),\r\n      method,\r\n      headers,\r\n      body,\r\n    },\r\n    timeout: 15000,\r\n  }).pipe(\r\n    catchError(e => {\r\n      if (e.status === 401) {\r\n        navigation.navigate('Auth', { screen: 'login' });\r\n      }\r\n      return of({\r\n        response: {\r\n          status: e.status,\r\n          message: e.message,\r\n          error: e.name,\r\n          result: 'fail',\r\n        },\r\n        fullError: e,\r\n      });\r\n    }),\r\n    tap(data => {\r\n      console.log(\r\n        'HTTPCLIENT.RESPONSE',\r\n        method,\r\n        url,\r\n        JSON.stringify(data.response),\r\n      );\r\n    }),\r\n  );\r\n};\r\n\r\nconst HttpClient = {\r\n  get: (url, headers, params) => request(url, 'GET', null, headers, params),\r\n  put: (url, body, headers, params) =>\r\n    request(\r\n      url,\r\n      'PUT',\r\n      body,\r\n      {\r\n        'Content-Type': 'application/json',\r\n        ...headers,\r\n      },\r\n      params,\r\n    ),\r\n  post: (url, body, headers, params) =>\r\n    request(\r\n      url,\r\n      'POST',\r\n      body,\r\n      {\r\n        'Content-Type': 'application/json',\r\n        ...headers,\r\n      },\r\n      params,\r\n    ),\r\n  delete: (url, headers, params) =>\r\n    request(url, 'DELETE', null, headers, params),\r\n};\r\n\r\nexport default HttpClient;\r\n"]},"metadata":{},"sourceType":"script"}