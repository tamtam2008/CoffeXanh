{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WaterfallItem = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _jsxFileName = \"C:\\\\Users\\\\ADMINS\\\\Desktop\\\\GreenApp\\\\CoffeXanh\\\\node_modules\\\\react-native-largelist-v3\\\\WaterfallItem.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar WaterfallItem = function (_React$Component) {\n  (0, _inherits2.default)(WaterfallItem, _React$Component);\n\n  var _super = _createSuper(WaterfallItem);\n\n  function WaterfallItem(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, WaterfallItem);\n    _this = _super.call(this, props);\n    _this.state = {\n      itemIndex: 0\n    };\n\n    _this.updateOffset(props.offset, true);\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(WaterfallItem, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(next) {\n      this.updateOffset(next.offset, false, next);\n    }\n  }, {\n    key: \"updateOffset\",\n    value: function updateOffset(offset) {\n      var init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var next = arguments.length > 2 ? arguments[2] : undefined;\n      var index = 0;\n      if (!next) next = this.props;\n\n      for (var i = 0; i < next.input.length; ++i) {\n        if (offset > next.input[i]) {\n          index = i;\n        }\n      }\n\n      var itemIndex = next.itemIndexes[index];\n\n      if (itemIndex !== this.state.itemIndex) {\n        if (init) this.state = {\n          itemIndex: itemIndex\n        };else this.setState({\n          itemIndex: itemIndex\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          data = _this$props.data,\n          style = _this$props.style,\n          heightForItem = _this$props.heightForItem,\n          renderItem = _this$props.renderItem;\n      var itemIndex = this.state.itemIndex;\n      if (itemIndex === undefined || itemIndex < 0 || itemIndex >= data.length) return null;\n\n      var wStyle = _reactNative.StyleSheet.flatten([style, {\n        height: heightForItem(data[itemIndex], itemIndex)\n      }]);\n\n      return _react.default.createElement(_reactNative.Animated.View, (0, _extends2.default)({}, this.props, {\n        style: wStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 7\n        }\n      }), renderItem(data[itemIndex], itemIndex));\n    }\n  }]);\n  return WaterfallItem;\n}(_react.default.Component);\n\nexports.WaterfallItem = WaterfallItem;","map":{"version":3,"sources":["C:/Users/ADMINS/Desktop/GreenApp/CoffeXanh/node_modules/react-native-largelist-v3/WaterfallItem.js"],"names":["WaterfallItem","props","state","itemIndex","updateOffset","offset","next","init","index","i","input","length","itemIndexes","setState","data","style","heightForItem","renderItem","undefined","wStyle","StyleSheet","flatten","height","React","Component"],"mappings":";;;;;;;;;;;;;;;;;;;AASA;;AACA;;;;;;;;IAGaA,a;;;;;AAKX,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA;AACjB,8BAAMA,KAAN;AADiB,UAJnBC,KAImB,GAJX;AACNC,MAAAA,SAAS,EAAE;AADL,KAIW;;AAEjB,UAAKC,YAAL,CAAkBH,KAAK,CAACI,MAAxB,EAAgC,IAAhC;;AAFiB;AAGlB;;;;qDAEgCC,I,EAAyB;AACxD,WAAKF,YAAL,CAAkBE,IAAI,CAACD,MAAvB,EAA+B,KAA/B,EAAsCC,IAAtC;AACD;;;iCAEYD,M,EAAiE;AAAA,UAAjDE,IAAiD,uEAAjC,KAAiC;AAAA,UAA1BD,IAA0B;AAC5E,UAAIE,KAAK,GAAG,CAAZ;AACA,UAAI,CAACF,IAAL,EAAWA,IAAI,GAAG,KAAKL,KAAZ;;AACX,WAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAACI,KAAL,CAAWC,MAA/B,EAAuC,EAAEF,CAAzC,EAA4C;AAC1C,YAAIJ,MAAM,GAAGC,IAAI,CAACI,KAAL,CAAWD,CAAX,CAAb,EAA4B;AAC1BD,UAAAA,KAAK,GAAGC,CAAR;AACD;AACF;;AACD,UAAMN,SAAS,GAAGG,IAAI,CAACM,WAAL,CAAiBJ,KAAjB,CAAlB;;AACA,UAAIL,SAAS,KAAK,KAAKD,KAAL,CAAWC,SAA7B,EAAwC;AACtC,YAAII,IAAJ,EAAU,KAAKL,KAAL,GAAa;AAAEC,UAAAA,SAAS,EAATA;AAAF,SAAb,CAAV,KACK,KAAKU,QAAL,CAAc;AAAEV,UAAAA,SAAS,EAATA;AAAF,SAAd;AACN;AACF;;;6BAEQ;AAAA,wBAC4C,KAAKF,KADjD;AAAA,UACCa,IADD,eACCA,IADD;AAAA,UACOC,KADP,eACOA,KADP;AAAA,UACcC,aADd,eACcA,aADd;AAAA,UAC6BC,UAD7B,eAC6BA,UAD7B;AAAA,UAECd,SAFD,GAEe,KAAKD,KAFpB,CAECC,SAFD;AAGP,UAAIA,SAAS,KAAKe,SAAd,IAA2Bf,SAAS,GAAG,CAAvC,IAA4CA,SAAS,IAAIW,IAAI,CAACH,MAAlE,EAA0E,OAAO,IAAP;;AAC1E,UAAMQ,MAAM,GAAGC,wBAAWC,OAAX,CAAmB,CAACN,KAAD,EAAQ;AAAEO,QAAAA,MAAM,EAAEN,aAAa,CAACF,IAAI,CAACX,SAAD,CAAL,EAAkBA,SAAlB;AAAvB,OAAR,CAAnB,CAAf;;AACA,aACE,6BAAC,qBAAD,CAAU,IAAV,6BAAmB,KAAKF,KAAxB;AAA+B,QAAA,KAAK,EAAEkB,MAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UACGF,UAAU,CAACH,IAAI,CAACX,SAAD,CAAL,EAAkBA,SAAlB,CADb,CADF;AAKD;;;EAvCgCoB,eAAMC,S","sourcesContent":["/*\n *\n * Created by Stone\n * https://github.com/bolan9999\n * Email: shanshang130@gmail.com\n * Date: 2019/2/22\n *\n */\n\nimport React from \"react\";\nimport { StyleSheet,Animated } from \"react-native\";\nimport type { WaterfallItemType } from \"./Types\";\n\nexport class WaterfallItem extends React.Component<WaterfallItemType> {\n  state = {\n    itemIndex: 0\n  };\n\n  constructor(props) {\n    super(props);\n    this.updateOffset(props.offset, true);\n  }\n\n  UNSAFE_componentWillReceiveProps(next: WaterfallItemType) {\n    this.updateOffset(next.offset, false, next);\n  }\n\n  updateOffset(offset: number, init: boolean = false, next?: WaterfallItemType) {\n    let index = 0;\n    if (!next) next = this.props;\n    for (let i = 0; i < next.input.length; ++i) {\n      if (offset > next.input[i]) {\n        index = i;\n      }\n    }\n    const itemIndex = next.itemIndexes[index];\n    if (itemIndex !== this.state.itemIndex) {\n      if (init) this.state = { itemIndex };\n      else this.setState({ itemIndex });\n    }\n  }\n\n  render() {\n    const { data, style, heightForItem, renderItem } = this.props;\n    const { itemIndex } = this.state;\n    if (itemIndex === undefined || itemIndex < 0 || itemIndex >= data.length) return null;\n    const wStyle = StyleSheet.flatten([style, { height: heightForItem(data[itemIndex], itemIndex) }]);\n    return (\n      <Animated.View {...this.props} style={wStyle}>\n        {renderItem(data[itemIndex], itemIndex)}\n      </Animated.View>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"script"}