{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Group = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Group = function (_React$Component) {\n  (0, _inherits2.default)(Group, _React$Component);\n\n  var _super = _createSuper(Group);\n\n  function Group(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, Group);\n    _this = _super.call(this, props);\n    _this._currentIndex = 0;\n    _this._offset = 0;\n    _this._margin = 0;\n\n    if (props.initialContentOffset) {\n      _this.contentConversion(props.initialContentOffset.y, true);\n    }\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(Group, [{\n    key: \"contentConversion\",\n    value: function contentConversion(offset) {\n      var init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      this._offset = offset;\n      var _this$props = this.props,\n          input = _this$props.input,\n          output = _this$props.output;\n      var cc = [];\n      output.forEach(function (v) {\n        return cc.indexOf(v) < 0 && cc.push(v);\n      });\n\n      for (var i = 0; i < input.length; ++i) {\n        if (offset >= input[i] && offset <= input[i + 1]) {\n          this.update(cc.indexOf(output[i]), init);\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(index, init) {\n      if (index < 0 || index >= this.props.indexes.length || this._currentIndex === index) return;\n      this._currentIndex = index;\n      !init && this.forceUpdate();\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(next) {\n      if (next.offset) {\n        this._offset = null;\n        this.contentConversion(next.offset);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          indexes = _this$props2.indexes,\n          heightForSection = _this$props2.heightForSection,\n          heightForIndexPath = _this$props2.heightForIndexPath,\n          renderIndexPath = _this$props2.renderIndexPath,\n          inverted = _this$props2.inverted;\n      if (this._currentIndex >= indexes.length) return null;\n      this._margin = 0;\n      return indexes[this._currentIndex].map(function (indexPath, index) {\n        if (indexPath.row === -1) {\n          _this2._margin = heightForSection(indexPath.section);\n          return null;\n        }\n\n        var height = heightForIndexPath(indexPath);\n        if (height === 0) return null;\n\n        var cell = _react.default.Children.only(renderIndexPath(indexPath));\n\n        var marginTop = _this2._margin;\n        _this2._margin = 0;\n\n        var style = _reactNative.StyleSheet.flatten([cell.props.style, {\n          height: height,\n          marginTop: marginTop,\n          alignSelf: \"stretch\",\n          flex: 0,\n          transform: [{\n            scaleY: inverted ? -1 : 1\n          }]\n        }]);\n\n        var key = cell.props.key ? cell.props.key : index;\n        return _react.default.cloneElement(cell, {\n          key: key,\n          style: style\n        });\n      });\n    }\n  }]);\n  return Group;\n}(_react.default.Component);\n\nexports.Group = Group;","map":{"version":3,"sources":["C:/Users/ADMINS/Desktop/GreenApp/CoffeXanh/node_modules/react-native-largelist-v3/Group.js"],"names":["Group","props","_currentIndex","_offset","_margin","initialContentOffset","contentConversion","y","offset","init","input","output","cc","forEach","v","indexOf","push","i","length","update","index","indexes","forceUpdate","next","heightForSection","heightForIndexPath","renderIndexPath","inverted","map","indexPath","row","section","height","cell","React","Children","only","marginTop","style","StyleSheet","flatten","alignSelf","flex","transform","scaleY","key","cloneElement","Component"],"mappings":"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","sourcesContent":["/*\n *\n * Created by Stone\n * Email: shanshang130@gmail.com\n * Date: 2018/7/17\n *\n */\n\nimport React from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport type { GroupPropType } from \"./Types\";\n\nexport class Group extends React.Component<GroupPropType> {\n  _currentIndex = 0;\n  _offset = 0;\n  _margin = 0;\n\n  constructor(props) {\n    super(props);\n    if (props.initialContentOffset) {\n      this.contentConversion(props.initialContentOffset.y, true);\n    }\n  }\n\n  contentConversion(offset: number, init: boolean = false) {\n    this._offset = offset;\n    const { input, output } = this.props;\n    const cc = [];\n    output.forEach(v => cc.indexOf(v) < 0 && cc.push(v));\n    for (let i = 0; i < input.length; ++i) {\n      if (offset >= input[i] && offset <= input[i + 1]) {\n        this.update(cc.indexOf(output[i]), init);\n        break;\n      }\n    }\n  }\n\n  update(index: number, init: boolean) {\n    if (index < 0 || index >= this.props.indexes.length || this._currentIndex === index) return;\n    this._currentIndex = index;\n    !init && this.forceUpdate();\n  }\n\n  UNSAFE_componentWillReceiveProps(next: GroupPropType) {\n    if (next.offset) {\n      this._offset = null;\n      this.contentConversion(next.offset);\n    }\n  }\n\n  render() {\n    const { indexes, heightForSection, heightForIndexPath, renderIndexPath, inverted } = this.props;\n    if (this._currentIndex >= indexes.length) return null;\n    this._margin = 0;\n    return indexes[this._currentIndex].map((indexPath, index) => {\n      if (indexPath.row === -1) {\n        this._margin = heightForSection(indexPath.section);\n        return null;\n      }\n      const height = heightForIndexPath(indexPath);\n      if (height === 0) return null;\n      const cell = React.Children.only(renderIndexPath(indexPath));\n      const marginTop = this._margin;\n      this._margin = 0;\n      const style = StyleSheet.flatten([\n        cell.props.style,\n        {\n          height,\n          marginTop,\n          alignSelf: \"stretch\",\n          flex: 0,\n          transform: [{ scaleY: inverted ? -1 : 1 }]\n        }\n      ]);\n      const key = cell.props.key ? cell.props.key : index;\n      return React.cloneElement(cell, {\n        key,\n        style\n      });\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"script"}