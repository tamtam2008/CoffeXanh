{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactI18next = require(\"react-i18next\");\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _Container = _interopRequireDefault(require(\"../../../components/layout/Container\"));\n\nvar _BaseStyles = require(\"../../../constants/BaseStyles\");\n\nvar _LocationPermissionPopup = _interopRequireDefault(require(\"./components/LocationPermissionPopup/LocationPermissionPopup\"));\n\nvar _SearchProduct = _interopRequireDefault(require(\"./components/productModal/searchProduct/SearchProduct.screen\"));\n\nvar _ProductTabs = _interopRequireDefault(require(\"./components/tabs/ProductTabs\"));\n\nvar _Menu = _interopRequireDefault(require(\"./Menu.style\"));\n\nvar _native = require(\"@react-navigation/native\");\n\nvar _SessionUtils = _interopRequireDefault(require(\"../../../session/SessionUtils\"));\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\ADMINS\\\\Desktop\\\\GreenApp\\\\CoffeXanh\\\\src\\\\screens\\\\root\\\\menu\\\\Menu.screen.js\";\n\nvar MenuScreen = function MenuScreen(_ref) {\n  var haveItems = _ref.haveItems,\n      numberItems = _ref.numberItems,\n      totalAmount = _ref.totalAmount;\n\n  var _useTranslation = (0, _reactI18next.useTranslation)(),\n      t = _useTranslation.t;\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      permissionLocation = _useState2[0],\n      setPermissionLocation = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      permissionPopup = _useState4[0],\n      showPermissionsPopup = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(false),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      showSearchModal = _useState6[0],\n      setShowSearchModal = _useState6[1];\n\n  (0, _native.useFocusEffect)(function () {\n    var checkLocationPermission = function checkLocationPermission() {\n      var checkPermission;\n      return _regenerator.default.async(function checkLocationPermission$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!_SessionUtils.default.config().locationPermission) {\n                _context.next = 5;\n                break;\n              }\n\n              _context.next = 3;\n              return _regenerator.default.awrap(_reactNative.PermissionsAndroid.check(_reactNative.PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION));\n\n            case 3:\n              checkPermission = _context.sent;\n\n              if (!checkPermission) {\n                showPermissionsPopup(true);\n              }\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    checkLocationPermission();\n  });\n  var refreshScreen = (0, _react.useCallback)(function () {\n    setShowSearchModal(false);\n    showPermissionsPopup(false);\n  }, []);\n  return _react.default.createElement(_Container.default, {\n    style: _Menu.default.container,\n    scrollEnabled: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: [_BaseStyles.BaseStyles.boxWithShadow2, _Menu.default.container, _Menu.default.productContainer],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: [_Menu.default.container],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_ProductTabs.default, {\n    openSearch: function openSearch() {\n      setShowSearchModal(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 11\n    }\n  }))), _react.default.createElement(_LocationPermissionPopup.default, {\n    visible: permissionPopup,\n    cancelAction: function cancelAction() {\n      return showPermissionsPopup(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }), _react.default.createElement(_SearchProduct.default, {\n    visible: showSearchModal,\n    onClose: function onClose() {\n      setShowSearchModal(false);\n    },\n    refreshScreen: refreshScreen,\n    haveItems: haveItems,\n    numberItems: numberItems,\n    totalAmount: totalAmount,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var cart = state.cart;\n  return {\n    haveItems: cart.items.length > 0,\n    numberItems: cart.items.length > 0 ? cart.items.reduce(function (a, b) {\n      return a + b.quantity;\n    }, 0) : 0,\n    totalAmount: cart.totalAmount + cart.fees - cart.promotion\n  };\n};\n\nvar _default = (0, _reactRedux.connect)(mapStateToProps, null)(MenuScreen);\n\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/ADMINS/Desktop/GreenApp/CoffeXanh/src/screens/root/menu/Menu.screen.js"],"names":["MenuScreen","haveItems","numberItems","totalAmount","t","permissionLocation","setPermissionLocation","permissionPopup","showPermissionsPopup","showSearchModal","setShowSearchModal","checkLocationPermission","SessionUtils","config","locationPermission","PermissionsAndroid","check","PERMISSIONS","ACCESS_FINE_LOCATION","checkPermission","refreshScreen","styles","container","BaseStyles","boxWithShadow2","productContainer","mapStateToProps","state","cart","items","length","reduce","a","b","quantity","fees","promotion"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { PermissionsAndroid, View } from 'react-native';\r\nimport { connect } from 'react-redux';\r\nimport Container from '../../../components/layout/Container';\r\nimport { BaseStyles } from '../../../constants/BaseStyles';\r\nimport LocationPermissionPopup from './components/LocationPermissionPopup/LocationPermissionPopup';\r\nimport SearchProductScreen from './components/productModal/searchProduct/SearchProduct.screen';\r\nimport ProductTabs from './components/tabs/ProductTabs';\r\nimport styles from './Menu.style';\r\nimport { useFocusEffect } from '@react-navigation/native';\r\nimport SessionUtils from '../../../session/SessionUtils';\r\n\r\nconst MenuScreen = ({ haveItems, numberItems, totalAmount }) => {\r\n  const { t } = useTranslation();\r\n  const [permissionLocation, setPermissionLocation] = useState(false);\r\n  const [permissionPopup, showPermissionsPopup] = useState(false);\r\n  const [showSearchModal, setShowSearchModal] = useState(false);\r\n\r\n  useFocusEffect(() => {\r\n    const checkLocationPermission = async () => {\r\n      if (SessionUtils.config().locationPermission) {\r\n        const checkPermission = await PermissionsAndroid.check(\r\n          PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,\r\n        );\r\n        if (!checkPermission) {\r\n          showPermissionsPopup(true);\r\n        }\r\n      }\r\n    };\r\n    checkLocationPermission();\r\n  });\r\n  const refreshScreen = useCallback(() => {\r\n    setShowSearchModal(false);\r\n    showPermissionsPopup(false);\r\n  }, []);\r\n  return (\r\n    <Container style={styles.container} scrollEnabled={false}>\r\n      <View\r\n        style={[\r\n          BaseStyles.boxWithShadow2,\r\n          styles.container,\r\n          styles.productContainer,\r\n        ]}>\r\n        <View style={[styles.container]}>\r\n          <ProductTabs\r\n            openSearch={() => {\r\n              setShowSearchModal(true);\r\n            }}\r\n          />\r\n        </View>\r\n      </View>\r\n      <LocationPermissionPopup\r\n        visible={permissionPopup}\r\n        cancelAction={() => showPermissionsPopup(false)}\r\n      />\r\n      <SearchProductScreen\r\n        visible={showSearchModal}\r\n        onClose={() => {\r\n          setShowSearchModal(false);\r\n        }}\r\n        refreshScreen={refreshScreen}\r\n        haveItems={haveItems}\r\n        numberItems={numberItems}\r\n        totalAmount={totalAmount}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { cart } = state;\r\n  return {\r\n    haveItems: cart.items.length > 0,\r\n    numberItems:\r\n      cart.items.length > 0\r\n        ? cart.items.reduce(function (a, b) {\r\n            return a + b.quantity;\r\n          }, 0)\r\n        : 0,\r\n    totalAmount: cart.totalAmount + cart.fees - cart.promotion,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, null)(MenuScreen);\r\n"]},"metadata":{},"sourceType":"script"}