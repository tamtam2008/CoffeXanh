{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LargeList = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _styles = require(\"./styles\");\n\nvar _reactNativeSpringScrollview = require(\"react-native-spring-scrollview\");\n\nvar _Group = require(\"./Group\");\n\nvar _idx = require(\"./idx\");\n\nvar _Section = require(\"./Section\");\n\nvar _jsxFileName = \"C:\\\\Users\\\\ADMINS\\\\Desktop\\\\GreenApp\\\\CoffeXanh\\\\node_modules\\\\react-native-largelist-v3\\\\LargeList.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar screenLayout = _reactNative.Dimensions.get(\"window\");\n\nvar screenHeight = Math.max(screenLayout.width, screenLayout.height);\n\nvar LargeList = function (_React$PureComponent) {\n  (0, _inherits2.default)(LargeList, _React$PureComponent);\n\n  var _super = _createSuper(LargeList);\n\n  function LargeList(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, LargeList);\n    _this = _super.call(this, props);\n    _this._groupRefs = [];\n    _this._scrollView = _react.default.createRef();\n    _this._shouldUpdateContent = true;\n    _this._lastTick = 0;\n    _this._contentOffsetY = 0;\n\n    _this._onSizeChange = function (size) {\n      _this._size = size;\n      _this.props.onSizeChange && _this.props.onSizeChange(size);\n      if (_this._shouldRenderContent()) _this.forceUpdate();\n    };\n\n    _this._onHeaderLayout = function (e) {\n      if (_this._headerLayout && _this._headerLayout.height === e.nativeEvent.layout.height) return;\n      _this._headerLayout = e.nativeEvent.layout;\n      _this._orgOnHeaderLayout && _this._orgOnHeaderLayout(e);\n      if (_this._shouldRenderContent()) _this.forceUpdate();\n    };\n\n    _this._onFooterLayout = function (e) {\n      if (_this._footerLayout && _this._footerLayout.height === e.nativeEvent.layout.height) return;\n      _this._footerLayout = e.nativeEvent.layout;\n      _this._orgOnFooterLayout && _this._orgOnFooterLayout(e);\n      if (_this._shouldRenderContent()) _this.forceUpdate();\n    };\n\n    _this._onScrollEnd = function () {\n      _this._groupRefs.forEach(function (group) {\n        return (0, _idx.idx)(function () {\n          return group.current.contentConversion(_this._contentOffsetY);\n        });\n      });\n\n      (0, _idx.idx)(function () {\n        return _this._sectionRefs.forEach(function (sectionRef) {\n          sectionRef.current.updateOffset(_this._contentOffsetY);\n        });\n      });\n      _this.props.onMomentumScrollEnd && _this.props.onMomentumScrollEnd();\n    };\n\n    _this._onScroll = function (e) {\n      var offsetY = e.nativeEvent.contentOffset.y;\n      _this._contentOffsetY = offsetY;\n      _this._shouldUpdateContent && (0, _idx.idx)(function () {\n        return _this._sectionRefs.forEach(function (sectionRef) {\n          sectionRef.current.updateOffset(_this._contentOffsetY);\n        });\n      });\n      var now = new Date().getTime();\n      _this.props.onScroll && _this.props.onScroll(e);\n\n      if (_this._lastTick - now > 30) {\n        _this._lastTick = now;\n        return;\n      }\n\n      _this._lastTick = now;\n      _this._shouldUpdateContent && _this._groupRefs.forEach(function (group) {\n        return (0, _idx.idx)(function () {\n          return group.current.contentConversion(offsetY);\n        });\n      });\n    };\n\n    for (var i = 0; i < props.groupCount; ++i) {\n      _this._groupRefs.push(_react.default.createRef());\n    }\n\n    _this.obtainOffset(true);\n\n    if (props.initialContentOffset) {\n      _this._contentOffsetY = props.initialContentOffset.y;\n    }\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(LargeList, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(props) {\n      if (props.onNativeContentOffsetExtract && this.props.onNativeContentOffsetExtract !== props.onNativeContentOffsetExtract) {\n        this.obtainOffset();\n      }\n    }\n  }, {\n    key: \"obtainOffset\",\n    value: function obtainOffset() {\n      this._nativeOffset = _objectSpread({\n        x: new _reactNative.Animated.Value(0),\n        y: new _reactNative.Animated.Value(0)\n      }, this.props.onNativeContentOffsetExtract);\n      this._offset = this._nativeOffset.y;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          data = _this$props.data,\n          heightForSection = _this$props.heightForSection,\n          heightForIndexPath = _this$props.heightForIndexPath,\n          groupMinHeight = _this$props.groupMinHeight,\n          groupCount = _this$props.groupCount,\n          headerStickyEnabled = _this$props.headerStickyEnabled;\n      if (this.props.renderEmpty && (data.length === 0 || data[0].items.length === 0)) return this._renderEmpty();\n      var groupIndexes = [];\n      var indexes = [];\n      var sectionTops = [];\n      var sectionHeights = [];\n      var currentGroupIndex = 0;\n      var inputs = [];\n      var outputs = [];\n      var lastOffset = [];\n      var sectionInputs = [];\n      var sectionOutputs = [];\n      var sectionIndexes = [];\n      var sections = [0];\n      var sumHeight = this._headerLayout ? this._headerLayout.height : 0;\n      var wrapperHeight = (0, _idx.idx)(function () {\n        return _this2._size.height;\n      }, 700);\n\n      var shouldRenderContent = this._shouldRenderContent();\n\n      if (shouldRenderContent) {\n        var currentGroupHeight = 0;\n        var headerHeight = this._headerLayout ? this._headerLayout.height : 0;\n\n        for (var i = 0; i < groupCount; ++i) {\n          inputs.push(i === 0 ? [Number.MIN_SAFE_INTEGER] : []);\n          outputs.push(i === 0 ? [sumHeight] : []);\n          lastOffset.push(sumHeight);\n          groupIndexes.push([]);\n        }\n\n        for (var section = 0; section < data.length; ++section) {\n          for (var row = -1; row < data[section].items.length; ++row) {\n            var height = void 0;\n\n            if (row === -1) {\n              height = heightForSection(section);\n              sectionHeights.push(height);\n              sectionTops[section] = sumHeight;\n            } else {\n              height = heightForIndexPath({\n                section: section,\n                row: row\n              });\n            }\n\n            currentGroupHeight += height;\n            sumHeight += height;\n            indexes.push({\n              section: section,\n              row: row\n            });\n\n            if (currentGroupHeight >= groupMinHeight || section === data.length - 1 && row === data[section].items.length - 1) {\n              groupIndexes[currentGroupIndex].push(indexes);\n              indexes = [];\n              currentGroupHeight = 0;\n              currentGroupIndex++;\n              currentGroupIndex %= groupCount;\n              if (section === data.length - 1 && row === data[section].items.length - 1) break;\n\n              if (inputs[currentGroupIndex].length === 0) {\n                inputs[currentGroupIndex].push(Number.MIN_SAFE_INTEGER);\n              }\n\n              inputs[currentGroupIndex].push(sumHeight - wrapperHeight);\n              inputs[currentGroupIndex].push(sumHeight + 0.1 - wrapperHeight);\n\n              if (outputs[currentGroupIndex].length === 0) {\n                outputs[currentGroupIndex].push(sumHeight);\n                outputs[currentGroupIndex].push(sumHeight);\n              } else {\n                outputs[currentGroupIndex].push(lastOffset[currentGroupIndex]);\n              }\n\n              outputs[currentGroupIndex].push(sumHeight);\n              lastOffset[currentGroupIndex] = sumHeight;\n            }\n          }\n        }\n\n        inputs.forEach(function (range) {\n          return range.push(Number.MAX_SAFE_INTEGER);\n        });\n        outputs.forEach(function (range) {\n          return range.push(range[range.length - 1]);\n        });\n        var viewport = [];\n        sectionTops.forEach(function (top) {\n          var first = viewport[0];\n\n          if (first !== undefined && top - first > screenHeight) {\n            viewport.splice(0, 1);\n          }\n\n          viewport.push(top);\n          if (sections.length < viewport.length + 1) sections.push(sections.length);\n        });\n        this._sectionRefs = [];\n        sections.forEach(function () {\n          sectionInputs.push([]);\n          sectionOutputs.push([]);\n          sectionIndexes.push([]);\n\n          _this2._sectionRefs.push(_react.default.createRef());\n        });\n\n        for (var _section = 0; _section < data.length; _section++) {\n          var index = _section % sections.length;\n          var first = sectionInputs[index].length <= 0;\n          sectionInputs[index].push(first ? sectionTops[_section] - 1 - headerHeight : sectionInputs[index][sectionInputs[index].length - 1] + 0.1, sectionTops[_section] - Math.min(headerHeight, wrapperHeight), sectionTops[_section]);\n          sectionIndexes[index].push(_section, _section, _section);\n          sectionOutputs[index].push(sectionTops[_section], sectionTops[_section], sectionTops[_section]);\n\n          if (_section + 1 < data.length) {\n            sectionInputs[index].push(sectionTops[_section + 1] - sectionHeights[_section], sectionTops[_section + 1]);\n            sectionIndexes[index].push(_section, _section);\n            sectionOutputs[index].push(sectionTops[_section + 1] - sectionHeights[_section], sectionTops[_section + 1] - sectionHeights[_section]);\n          } else {\n            var last = sectionTops[_section] + sectionHeights[_section];\n            sectionInputs[index].push(last);\n            sectionIndexes[index].push(_section);\n            sectionOutputs[index].push(last);\n          }\n        }\n\n        if (headerStickyEnabled) {\n          if (headerHeight >= wrapperHeight) console.error(\"WrapperHeight must be larger than largelist header height when headerStickyEnabled is enabled\");\n          sectionInputs.forEach(function (inputs) {\n            return inputs.forEach(function (input, index) {\n              var mod = index % 5;\n              if (mod > 1 && mod < 4) inputs[index] -= (0, _idx.idx)(function () {\n                return _this2._headerLayout.height;\n              }, 0);\n            });\n          });\n        }\n\n        sectionInputs.forEach(function (inputs, index) {\n          while (inputs.length > 1 && inputs[inputs.length - 1] === inputs[inputs.length - 2]) {\n            inputs.splice(inputs.length - 1, 1);\n            sectionIndexes[index].splice(sectionIndexes[index].length - 1, 1);\n            sectionOutputs[index].splice(sectionOutputs[index].length - 1, 1);\n          }\n        });\n      }\n\n      if (this._footerLayout) sumHeight += this._footerLayout.height;\n      var contentStyle = sumHeight > 0 ? {\n        height: sumHeight > wrapperHeight ? sumHeight : wrapperHeight + _reactNative.StyleSheet.hairlineWidth\n      } : null;\n      return _react.default.createElement(_reactNativeSpringScrollview.SpringScrollView, (0, _extends2.default)({}, this.props, {\n        ref: this._scrollView,\n        onSizeChange: this._onSizeChange,\n        contentStyle: _reactNative.StyleSheet.flatten([this.props.contentStyle, contentStyle]),\n        onNativeContentOffsetExtract: this._nativeOffset,\n        onScroll: this._onScroll,\n        onMomentumScrollEnd: this._onScrollEnd,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 7\n        }\n      }), shouldRenderContent && groupIndexes.map(function (indexes, index) {\n        var transform;\n\n        if (inputs[index].length > 1) {\n          transform = [{\n            translateY: _this2._offset.interpolate({\n              inputRange: inputs[index],\n              outputRange: outputs[index]\n            })\n          }];\n        }\n\n        var style = _reactNative.StyleSheet.flatten([_styles.styles.abs, {\n          transform: transform\n        }]);\n\n        return _react.default.createElement(_reactNative.Animated.View, {\n          key: index,\n          style: style,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }\n        }, _react.default.createElement(_Group.Group, (0, _extends2.default)({}, _this2.props, {\n          index: index,\n          ref: _this2._groupRefs[index],\n          indexes: indexes,\n          input: inputs[index],\n          output: outputs[index],\n          offset: _this2._contentOffsetY,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 17\n          }\n        })));\n      }), shouldRenderContent && sections.map(function (value, index) {\n        var transform;\n        if (sectionInputs[index].length > 1) transform = [{\n          translateY: _this2._offset.interpolate({\n            inputRange: sectionInputs[index],\n            outputRange: sectionOutputs[index]\n          })\n        }];\n\n        var style = _reactNative.StyleSheet.flatten([_styles.styles.abs, {\n          transform: transform\n        }]);\n\n        return _react.default.createElement(_Section.Section, (0, _extends2.default)({}, _this2.props, {\n          key: index,\n          ref: _this2._sectionRefs[index],\n          style: style,\n          input: sectionInputs[index],\n          output: sectionOutputs[index],\n          sectionIndexes: sectionIndexes[index],\n          offset: _this2._contentOffsetY,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }\n        }));\n      }), this._renderHeaderBackground(), this._renderHeader(), this._renderFooter());\n    }\n  }, {\n    key: \"_renderHeaderBackground\",\n    value: function _renderHeaderBackground() {\n      var renderScaleHeaderBackground = this.props.renderScaleHeaderBackground;\n      if (!renderScaleHeaderBackground || !renderScaleHeaderBackground() || !this._headerLayout) return null;\n      var height = this._headerLayout.height;\n      var style = {\n        position: \"absolute\",\n        left: 0,\n        top: 0,\n        right: 0,\n        height: height,\n        transform: [{\n          scale: this._offset.interpolate({\n            inputRange: [-height, 0, 1],\n            outputRange: [2, 1, 1]\n          })\n        }, {\n          translateY: _reactNative.Animated.divide(this._offset.interpolate({\n            inputRange: [-1, 0, 1],\n            outputRange: [-1 / 2, 0, 0]\n          }), this._offset.interpolate({\n            inputRange: [-height, 0, 1],\n            outputRange: [2, 1, 1]\n          }))\n        }]\n      };\n      return _react.default.createElement(_reactNative.Animated.View, {\n        style: style,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 12\n        }\n      }, renderScaleHeaderBackground());\n    }\n  }, {\n    key: \"_renderEmpty\",\n    value: function _renderEmpty() {\n      return _react.default.createElement(_reactNativeSpringScrollview.SpringScrollView, (0, _extends2.default)({\n        contentStyle: {\n          flex: 1\n        }\n      }, this.props, {\n        ref: this._scrollView,\n        onSizeChange: this._onSizeChange,\n        onNativeContentOffsetExtract: this._nativeOffset,\n        onScroll: this._onScroll,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 7\n        }\n      }), this._renderHeader && this._renderHeader(), this.props.renderEmpty && this.props.renderEmpty(), this.props.renderFooter && this.props.renderFooter());\n    }\n  }, {\n    key: \"_renderHeader\",\n    value: function _renderHeader() {\n      var _this$props2 = this.props,\n          renderHeader = _this$props2.renderHeader,\n          inverted = _this$props2.inverted,\n          headerStickyEnabled = _this$props2.headerStickyEnabled;\n      if (!renderHeader || !renderHeader()) return null;\n      var transform = [];\n      var zIndex = headerStickyEnabled ? 9999 : undefined;\n\n      if (this._shouldRenderContent()) {\n        headerStickyEnabled && transform.push({\n          translateY: this._offset.interpolate({\n            inputRange: [-1, 0, 1],\n            outputRange: [0, 0, 1]\n          })\n        });\n        if (inverted) transform.push({\n          scaleY: -1\n        });\n      } else {\n        transform.push({\n          translateY: 10000\n        });\n      }\n\n      var header = _react.default.Children.only(renderHeader());\n\n      this._orgOnHeaderLayout = header.onLayout;\n      return _react.default.createElement(_reactNative.Animated.View, {\n        style: _reactNative.StyleSheet.flatten([header.props.style, {\n          transform: transform,\n          zIndex: zIndex\n        }]),\n        onLayout: this._onHeaderLayout,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 7\n        }\n      }, header.props.children);\n    }\n  }, {\n    key: \"_renderFooter\",\n    value: function _renderFooter() {\n      var _this$props3 = this.props,\n          renderFooter = _this$props3.renderFooter,\n          inverted = _this$props3.inverted;\n      if (!renderFooter || !renderFooter()) return null;\n      var transform = {\n        transform: [{\n          translateY: this._shouldRenderContent() ? 0 : 10000\n        }, {\n          scaleY: inverted ? -1 : 1\n        }]\n      };\n\n      var footer = _react.default.Children.only(renderFooter());\n\n      this._orgOnFooterLayout = footer.onLayout;\n      return _react.default.cloneElement(footer, {\n        style: _reactNative.StyleSheet.flatten([_styles.styles.footer, footer.props.style, transform]),\n        onLayout: this._onFooterLayout\n      });\n    }\n  }, {\n    key: \"_shouldRenderContent\",\n    value: function _shouldRenderContent() {\n      var _this$props4 = this.props,\n          renderHeader = _this$props4.renderHeader,\n          renderFooter = _this$props4.renderFooter;\n      return this._size && (!renderHeader || !renderHeader() || this._headerLayout) && (!renderFooter || !renderFooter() || this._footerLayout);\n    }\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(offset) {\n      var _this3 = this;\n\n      var animated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (!this._scrollView.current) return Promise.reject(\"LargeList has not been initialized yet!\");\n      this._shouldUpdateContent = false;\n\n      this._groupRefs.forEach(function (group) {\n        return (0, _idx.idx)(function () {\n          return group.current.contentConversion(offset.y);\n        });\n      });\n\n      this._sectionRefs.forEach(function (sectionRef) {\n        return (0, _idx.idx)(function () {\n          return sectionRef.current.updateOffset(offset.y);\n        });\n      });\n\n      return this._scrollView.current.scrollTo(offset, animated).then(function () {\n        _this3._shouldUpdateContent = true;\n        return Promise.resolve();\n      });\n    }\n  }, {\n    key: \"scrollToIndexPath\",\n    value: function scrollToIndexPath(indexPath) {\n      var _this4 = this;\n\n      var animated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var _this$props5 = this.props,\n          data = _this$props5.data,\n          heightForSection = _this$props5.heightForSection,\n          heightForIndexPath = _this$props5.heightForIndexPath;\n      var ht = (0, _idx.idx)(function () {\n        return _this4._headerLayout.height;\n      }, 0);\n\n      for (var s = 0; s < data.length && s <= indexPath.section; ++s) {\n        if (indexPath.section === s && indexPath.row === -1) break;\n        ht += heightForSection(s);\n\n        for (var r = 0; r < data[s].items.length; ++r) {\n          if (indexPath.section === s && indexPath.row === r) break;\n          ht += heightForIndexPath({\n            section: s,\n            row: r\n          });\n        }\n      }\n\n      return this.scrollTo({\n        x: 0,\n        y: ht\n      }, animated);\n    }\n  }, {\n    key: \"endRefresh\",\n    value: function endRefresh() {\n      var _this5 = this;\n\n      (0, _idx.idx)(function () {\n        return _this5._scrollView.current.endRefresh();\n      });\n    }\n  }, {\n    key: \"endLoading\",\n    value: function endLoading() {\n      var _this6 = this;\n\n      (0, _idx.idx)(function () {\n        return _this6._scrollView.current.endLoading();\n      });\n    }\n  }]);\n  return LargeList;\n}(_react.default.PureComponent);\n\nexports.LargeList = LargeList;\nLargeList.defaultProps = {\n  heightForSection: function heightForSection() {\n    return 0;\n  },\n  renderSection: function renderSection() {\n    return null;\n  },\n  groupCount: 4,\n  groupMinHeight: screenHeight / 3,\n  updateTimeInterval: 150\n};","map":{"version":3,"sources":["C:/Users/ADMINS/Desktop/GreenApp/CoffeXanh/node_modules/react-native-largelist-v3/LargeList.js"],"names":["screenLayout","Dimensions","get","screenHeight","Math","max","width","height","LargeList","props","_groupRefs","_scrollView","React","createRef","_shouldUpdateContent","_lastTick","_contentOffsetY","_onSizeChange","size","_size","onSizeChange","_shouldRenderContent","forceUpdate","_onHeaderLayout","e","_headerLayout","nativeEvent","layout","_orgOnHeaderLayout","_onFooterLayout","_footerLayout","_orgOnFooterLayout","_onScrollEnd","forEach","group","current","contentConversion","_sectionRefs","sectionRef","updateOffset","onMomentumScrollEnd","_onScroll","offsetY","contentOffset","y","now","Date","getTime","onScroll","i","groupCount","push","obtainOffset","initialContentOffset","onNativeContentOffsetExtract","_nativeOffset","x","Animated","Value","_offset","data","heightForSection","heightForIndexPath","groupMinHeight","headerStickyEnabled","renderEmpty","length","items","_renderEmpty","groupIndexes","indexes","sectionTops","sectionHeights","currentGroupIndex","inputs","outputs","lastOffset","sectionInputs","sectionOutputs","sectionIndexes","sections","sumHeight","wrapperHeight","shouldRenderContent","currentGroupHeight","headerHeight","Number","MIN_SAFE_INTEGER","section","row","range","MAX_SAFE_INTEGER","viewport","top","first","undefined","splice","index","min","last","console","error","input","mod","contentStyle","StyleSheet","hairlineWidth","flatten","map","transform","translateY","interpolate","inputRange","outputRange","style","styles","abs","value","_renderHeaderBackground","_renderHeader","_renderFooter","renderScaleHeaderBackground","position","left","right","scale","divide","flex","renderFooter","renderHeader","inverted","zIndex","scaleY","header","Children","only","onLayout","children","footer","cloneElement","offset","animated","Promise","reject","scrollTo","then","resolve","indexPath","ht","s","r","endRefresh","endLoading","PureComponent","defaultProps","renderSection","updateTimeInterval"],"mappings":"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","sourcesContent":["/*\n *\n * Created by Stone\n * https://github.com/bolan9999\n * Email: shanshang130@gmail.com\n * Date: 2018/7/17\n *\n */\n\nimport React from \"react\";\nimport { Animated, StyleSheet, Dimensions, Platform } from \"react-native\";\nimport { styles } from \"./styles\";\nimport { SpringScrollView } from \"react-native-spring-scrollview\";\nimport type { IndexPath, LargeListPropType, Offset } from \"./Types\";\nimport { Group } from \"./Group\";\nimport { idx } from \"./idx\";\nimport { Section } from \"./Section\";\n\nconst screenLayout = Dimensions.get(\"window\");\nconst screenHeight = Math.max(screenLayout.width, screenLayout.height);\n\nexport class LargeList extends React.PureComponent<LargeListPropType> {\n  _groupRefs = [];\n  _offset: Animated.Value;\n  _scrollView = React.createRef();\n  _shouldUpdateContent = true;\n  _lastTick = 0;\n  _contentOffsetY = 0;\n  _headerLayout;\n  _footerLayout;\n  _nativeOffset;\n  _size;\n  _sectionRefs: [];\n  _orgOnHeaderLayout: () => 0;\n  _orgOnFooterLayout: () => 0;\n\n  static defaultProps = {\n    heightForSection: () => 0,\n    renderSection: () => null,\n    groupCount: 4,\n    groupMinHeight: screenHeight / 3,\n    updateTimeInterval: 150\n  };\n\n  constructor(props) {\n    super(props);\n    for (let i = 0; i < props.groupCount; ++i) {\n      this._groupRefs.push(React.createRef());\n    }\n    this.obtainOffset(true);\n    if (props.initialContentOffset) {\n      this._contentOffsetY = props.initialContentOffset.y;\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(props: LargeListPropType) {\n    if (\n      props.onNativeContentOffsetExtract &&\n      this.props.onNativeContentOffsetExtract !== props.onNativeContentOffsetExtract\n    ) {\n      this.obtainOffset();\n    }\n  }\n\n  obtainOffset() {\n    this._nativeOffset = {\n      x: new Animated.Value(0),\n      y: new Animated.Value(0),\n      ...this.props.onNativeContentOffsetExtract\n    };\n    this._offset = this._nativeOffset.y;\n  }\n\n  render() {\n    const { data, heightForSection, heightForIndexPath, groupMinHeight, groupCount, headerStickyEnabled } = this.props;\n    if (this.props.renderEmpty && (data.length === 0 || data[0].items.length === 0)) return this._renderEmpty();\n    const groupIndexes = [];\n    let indexes = [];\n    const sectionTops = [];\n    const sectionHeights = [];\n    let currentGroupIndex = 0;\n    const inputs = [];\n    const outputs = [];\n    const lastOffset = [];\n    const sectionInputs = [];\n    const sectionOutputs = [];\n    const sectionIndexes = [];\n    const sections = [0];\n    let sumHeight = this._headerLayout ? this._headerLayout.height : 0;\n    const wrapperHeight = idx(() => this._size.height, 700);\n    const shouldRenderContent = this._shouldRenderContent();\n    if (shouldRenderContent) {\n      let currentGroupHeight = 0;\n      const headerHeight = this._headerLayout ? this._headerLayout.height : 0;\n      for (let i = 0; i < groupCount; ++i) {\n        inputs.push(i === 0 ? [Number.MIN_SAFE_INTEGER] : []);\n        outputs.push(i === 0 ? [sumHeight] : []);\n        lastOffset.push(sumHeight);\n        groupIndexes.push([]);\n      }\n      for (let section = 0; section < data.length; ++section) {\n        for (let row = -1; row < data[section].items.length; ++row) {\n          let height;\n          if (row === -1) {\n            height = heightForSection(section);\n            sectionHeights.push(height);\n            sectionTops[section] = sumHeight;\n          } else {\n            height = heightForIndexPath({ section: section, row: row });\n          }\n          currentGroupHeight += height;\n          sumHeight += height;\n          indexes.push({ section: section, row: row });\n          if (\n            currentGroupHeight >= groupMinHeight ||\n            (section === data.length - 1 && row === data[section].items.length - 1)\n          ) {\n            groupIndexes[currentGroupIndex].push(indexes);\n            indexes = [];\n            currentGroupHeight = 0;\n            currentGroupIndex++;\n            currentGroupIndex %= groupCount;\n            if (section === data.length - 1 && row === data[section].items.length - 1) break;\n            if (inputs[currentGroupIndex].length === 0) {\n              inputs[currentGroupIndex].push(Number.MIN_SAFE_INTEGER);\n            }\n            inputs[currentGroupIndex].push(sumHeight - wrapperHeight);\n            inputs[currentGroupIndex].push(sumHeight + 0.1 - wrapperHeight);\n            if (outputs[currentGroupIndex].length === 0) {\n              outputs[currentGroupIndex].push(sumHeight);\n              outputs[currentGroupIndex].push(sumHeight);\n            } else {\n              outputs[currentGroupIndex].push(lastOffset[currentGroupIndex]);\n            }\n            outputs[currentGroupIndex].push(sumHeight);\n            lastOffset[currentGroupIndex] = sumHeight;\n          }\n        }\n      }\n      inputs.forEach(range => range.push(Number.MAX_SAFE_INTEGER));\n      outputs.forEach(range => range.push(range[range.length - 1]));\n      let viewport = [];\n\n      sectionTops.forEach(top => {\n        const first = viewport[0];\n        if (first !== undefined && top - first > screenHeight) {\n          viewport.splice(0, 1);\n        }\n        viewport.push(top);\n        if (sections.length < viewport.length + 1) sections.push(sections.length);\n      });\n\n      this._sectionRefs = [];\n      sections.forEach(() => {\n        sectionInputs.push([]);\n        sectionOutputs.push([]);\n        sectionIndexes.push([]);\n        this._sectionRefs.push(React.createRef());\n      });\n      for (let section = 0; section < data.length; section++) {\n        const index = section % sections.length;\n        const first = sectionInputs[index].length <= 0;\n        sectionInputs[index].push(\n          first ? sectionTops[section] - 1 - headerHeight : sectionInputs[index][sectionInputs[index].length - 1] + 0.1,\n          sectionTops[section] - Math.min(headerHeight, wrapperHeight),\n          sectionTops[section]\n        );\n        sectionIndexes[index].push(section, section, section);\n        sectionOutputs[index].push(sectionTops[section], sectionTops[section], sectionTops[section]);\n        if (section + 1 < data.length) {\n          sectionInputs[index].push(sectionTops[section + 1] - sectionHeights[section], sectionTops[section + 1]);\n          sectionIndexes[index].push(section, section);\n          sectionOutputs[index].push(\n            sectionTops[section + 1] - sectionHeights[section],\n            sectionTops[section + 1] - sectionHeights[section]\n          );\n        } else {\n          const last = sectionTops[section] + sectionHeights[section];\n          sectionInputs[index].push(last);\n          sectionIndexes[index].push(section);\n          sectionOutputs[index].push(last);\n        }\n      }\n      if (headerStickyEnabled){\n        if(headerHeight >= wrapperHeight)\n          console.error( \"WrapperHeight must be larger than largelist header height when headerStickyEnabled is enabled\");\n        sectionInputs.forEach(inputs =>\n          inputs.forEach((input, index) => {\n            const mod = index % 5;\n            if (mod > 1 && mod < 4) inputs[index] -= idx(() => this._headerLayout.height, 0);\n          })\n        );\n      }\n      sectionInputs.forEach((inputs, index) => {\n        while (inputs.length > 1 && inputs[inputs.length - 1] === inputs[inputs.length - 2]) {\n          inputs.splice(inputs.length - 1, 1);\n          sectionIndexes[index].splice(sectionIndexes[index].length - 1, 1);\n          sectionOutputs[index].splice(sectionOutputs[index].length - 1, 1);\n        }\n      });\n    }\n    if (this._footerLayout) sumHeight += this._footerLayout.height;\n    const contentStyle =\n      sumHeight > 0\n        ? {\n            height: sumHeight > wrapperHeight ? sumHeight : wrapperHeight + StyleSheet.hairlineWidth\n          }\n        : null;\n    return (\n      <SpringScrollView\n        {...this.props}\n        ref={this._scrollView}\n        onSizeChange={this._onSizeChange}\n        contentStyle={StyleSheet.flatten([this.props.contentStyle, contentStyle])}\n        onNativeContentOffsetExtract={this._nativeOffset}\n        onScroll={this._onScroll}\n        onMomentumScrollEnd={this._onScrollEnd}\n      >\n        {shouldRenderContent &&\n          groupIndexes.map((indexes, index) => {\n            let transform;\n            if (inputs[index].length > 1) {\n              transform = [\n                {\n                  translateY: this._offset.interpolate({\n                    inputRange: inputs[index],\n                    outputRange: outputs[index]\n                  })\n                }\n              ];\n            }\n            const style = StyleSheet.flatten([styles.abs, { transform }]);\n            return (\n              <Animated.View key={index} style={style}>\n                <Group\n                  {...this.props}\n                  index={index}\n                  ref={this._groupRefs[index]}\n                  indexes={indexes}\n                  input={inputs[index]}\n                  output={outputs[index]}\n                  offset={this._contentOffsetY}\n                />\n              </Animated.View>\n            );\n          })}\n        {shouldRenderContent &&\n          sections.map((value, index) => {\n            let transform;\n            if (sectionInputs[index].length > 1)\n              transform = [\n                {\n                  translateY: this._offset.interpolate({\n                    inputRange: sectionInputs[index],\n                    outputRange: sectionOutputs[index]\n                  })\n                }\n              ];\n            const style = StyleSheet.flatten([styles.abs, { transform }]);\n            return (\n              <Section\n                {...this.props}\n                key={index}\n                ref={this._sectionRefs[index]}\n                style={style}\n                input={sectionInputs[index]}\n                output={sectionOutputs[index]}\n                sectionIndexes={sectionIndexes[index]}\n                offset={this._contentOffsetY}\n              />\n            );\n          })}\n        {this._renderHeaderBackground()}\n        {this._renderHeader()}\n        {this._renderFooter()}\n      </SpringScrollView>\n    );\n  }\n\n  _renderHeaderBackground() {\n    const { renderScaleHeaderBackground } = this.props;\n    if (!renderScaleHeaderBackground || !renderScaleHeaderBackground() || !this._headerLayout) return null;\n    const height = this._headerLayout.height;\n    const style = {\n      position: \"absolute\",\n      left: 0,\n      top: 0,\n      right: 0,\n      height,\n      transform: [\n        {\n          scale: this._offset.interpolate({\n            inputRange: [-height, 0, 1],\n            outputRange: [2, 1, 1]\n          })\n        },\n        {\n          translateY: Animated.divide(\n            this._offset.interpolate({\n              inputRange: [-1, 0, 1],\n              outputRange: [-1 / 2, 0, 0]\n            }),\n            this._offset.interpolate({\n              inputRange: [-height, 0, 1],\n              outputRange: [2, 1, 1]\n            })\n          )\n        }\n      ]\n    };\n    return <Animated.View style={style}>{renderScaleHeaderBackground()}</Animated.View>;\n  }\n\n  _renderEmpty() {\n    return (\n      <SpringScrollView\n        contentStyle={{flex:1}}\n        {...this.props}\n        ref={this._scrollView}\n        onSizeChange={this._onSizeChange}\n        onNativeContentOffsetExtract={this._nativeOffset}\n        onScroll={this._onScroll}\n      >\n        {this._renderHeader && this._renderHeader()}\n        {this.props.renderEmpty && this.props.renderEmpty()}\n        {this.props.renderFooter && this.props.renderFooter()}\n      </SpringScrollView>\n    );\n  }\n\n  _renderHeader() {\n    const { renderHeader, inverted, headerStickyEnabled } = this.props;\n    if (!renderHeader || !renderHeader()) return null;\n    const transform = [];\n    const zIndex = headerStickyEnabled ? 9999 : undefined;\n    if (this._shouldRenderContent()) {\n      headerStickyEnabled &&\n        transform.push({\n          translateY: this._offset.interpolate({\n            inputRange: [-1, 0, 1],\n            outputRange: [0, 0, 1]\n          })\n        });\n      if (inverted) transform.push({ scaleY: -1 });\n    } else {\n      transform.push({ translateY: 10000 });\n    }\n    const header = React.Children.only(renderHeader());\n    this._orgOnHeaderLayout = header.onLayout;\n    return (\n      <Animated.View\n        style={StyleSheet.flatten([header.props.style, { transform, zIndex }])}\n        onLayout={this._onHeaderLayout}\n      >\n        {header.props.children}\n      </Animated.View>\n    );\n  }\n\n  _renderFooter() {\n    const { renderFooter, inverted } = this.props;\n    if (!renderFooter || !renderFooter()) return null;\n    const transform = {\n      transform: [{ translateY: this._shouldRenderContent() ? 0 : 10000 }, { scaleY: inverted ? -1 : 1 }]\n    };\n    const footer = React.Children.only(renderFooter());\n    this._orgOnFooterLayout = footer.onLayout;\n    return React.cloneElement(footer, {\n      style: StyleSheet.flatten([styles.footer, footer.props.style, transform]),\n      onLayout: this._onFooterLayout\n    });\n  }\n\n  _shouldRenderContent() {\n    const { renderHeader, renderFooter } = this.props;\n    return (\n      this._size &&\n      (!renderHeader || !renderHeader() || this._headerLayout) &&\n      (!renderFooter || !renderFooter() || this._footerLayout)\n    );\n  }\n\n  _onSizeChange = size => {\n    this._size = size;\n    this.props.onSizeChange && this.props.onSizeChange(size);\n    if (this._shouldRenderContent()) this.forceUpdate();\n  };\n\n  _onHeaderLayout = e => {\n    if (this._headerLayout && this._headerLayout.height === e.nativeEvent.layout.height) return;\n    this._headerLayout = e.nativeEvent.layout;\n    this._orgOnHeaderLayout && this._orgOnHeaderLayout(e);\n    if (this._shouldRenderContent()) this.forceUpdate();\n  };\n\n  _onFooterLayout = e => {\n    if (this._footerLayout && this._footerLayout.height === e.nativeEvent.layout.height) return;\n    this._footerLayout = e.nativeEvent.layout;\n    this._orgOnFooterLayout && this._orgOnFooterLayout(e);\n    if (this._shouldRenderContent()) this.forceUpdate();\n  };\n\n  _onScrollEnd = () => {\n    this._groupRefs.forEach(group => idx(() => group.current.contentConversion(this._contentOffsetY)));\n    idx(() =>\n      this._sectionRefs.forEach(sectionRef => {\n        sectionRef.current.updateOffset(this._contentOffsetY);\n      })\n    );\n    this.props.onMomentumScrollEnd && this.props.onMomentumScrollEnd();\n  };\n\n  _onScroll = e => {\n    const offsetY = e.nativeEvent.contentOffset.y;\n    this._contentOffsetY = offsetY;\n    this._shouldUpdateContent &&\n      idx(() =>\n        this._sectionRefs.forEach(sectionRef => {\n          sectionRef.current.updateOffset(this._contentOffsetY);\n        })\n      );\n    const now = new Date().getTime();\n    this.props.onScroll && this.props.onScroll(e);\n    if (this._lastTick - now > 30) {\n      this._lastTick = now;\n      return;\n    }\n    this._lastTick = now;\n    this._shouldUpdateContent && this._groupRefs.forEach(group => idx(() => group.current.contentConversion(offsetY)));\n  };\n\n  scrollTo(offset: Offset, animated: boolean = true): Promise<void> {\n    if (!this._scrollView.current) return Promise.reject(\"LargeList has not been initialized yet!\");\n    this._shouldUpdateContent = false;\n    this._groupRefs.forEach(group => idx(() => group.current.contentConversion(offset.y)));\n    this._sectionRefs.forEach(sectionRef => idx(() => sectionRef.current.updateOffset(offset.y)));\n    return this._scrollView.current.scrollTo(offset, animated).then(() => {\n      this._shouldUpdateContent = true;\n      return Promise.resolve();\n    });\n  }\n\n  scrollToIndexPath(indexPath: IndexPath, animated: boolean = true): Promise<void> {\n    const { data, heightForSection, heightForIndexPath } = this.props;\n    let ht = idx(() => this._headerLayout.height, 0);\n    for (let s = 0; s < data.length && s <= indexPath.section; ++s) {\n      if (indexPath.section === s && indexPath.row === -1) break;\n      ht += heightForSection(s);\n      for (let r = 0; r < data[s].items.length; ++r) {\n        if (indexPath.section === s && indexPath.row === r) break;\n        ht += heightForIndexPath({ section: s, row: r });\n      }\n    }\n    return this.scrollTo({ x: 0, y: ht }, animated);\n  }\n\n  endRefresh() {\n    idx(() => this._scrollView.current.endRefresh());\n  }\n\n  endLoading() {\n    idx(() => this._scrollView.current.endLoading());\n  }\n}\n"]},"metadata":{},"sourceType":"script"}