{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.initialState = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _MapStore = _interopRequireDefault(require(\"./MapStore.action\"));\n\nvar _App = _interopRequireDefault(require(\"../../../../config/App.config\"));\n\nvar _AppUtils = require(\"../../../../utils/AppUtils\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar initialState = {\n  isRequesting: false,\n  isLoading: false,\n  isFail: false,\n  failMsg: '',\n  province: [],\n  district: [],\n  store: [],\n  filter: {\n    province: {\n      name: 'N/a'\n    },\n    district: {\n      name: 'N/a'\n    }\n  }\n};\nexports.initialState = initialState;\n\nvar Reducer = function Reducer(state, _ref) {\n  var type = _ref.type,\n      payload = _ref.payload;\n\n  switch (type) {\n    case _MapStore.default.GET_DATA:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isRequesting: false,\n        isLoading: true,\n        isFail: false\n      });\n\n    case _MapStore.default.GET_STORE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isRequesting: true,\n        isFail: false\n      });\n\n    case _MapStore.default.GET_DATA_SUCCESS:\n      {\n        var _province = payload.sort((0, _AppUtils.dynamicSort)('id', 'asc'));\n\n        var _district = payload.length > 0 ? _province[0].listDist.sort((0, _AppUtils.dynamicSort)('distId', 'asc')) : [];\n\n        return _objectSpread(_objectSpread({}, state), {}, {\n          isRequesting: false,\n          isLoading: false,\n          isFail: false,\n          province: payload,\n          district: _district,\n          filter: {\n            province: {\n              id: payload.length > 0 ? payload[0].id : -1,\n              name: payload.length > 0 ? payload[0].name : 'N/a'\n            },\n            district: {\n              id: _district.length > 0 ? _district[0].distId : -1,\n              name: _district.length > 0 ? _district[0].distName : 'N/a'\n            }\n          }\n        });\n      }\n\n    case _MapStore.default.GET_DATA_FAIL:\n    case _MapStore.default.GET_STORE_FAIL:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isRequesting: false,\n        isLoading: false,\n        isFail: true,\n        failMsg: payload\n      });\n\n    case _MapStore.default.GET_STORE_SUCCESS:\n      {\n        var provinceId = payload.provinceId,\n            districtId = payload.districtId,\n            store = payload.store;\n        var _province2 = state.province.filter(function (p) {\n          return p.id === provinceId;\n        })[0];\n\n        var _district2 = (_province2 == null ? void 0 : _province2.listDist.filter(function (d) {\n          return d.distId === districtId;\n        })[0]) || {\n          distId: -1,\n          distName: 'N/a'\n        };\n\n        return _objectSpread(_objectSpread({}, state), {}, {\n          isRequesting: false,\n          isLoading: false,\n          isFail: false,\n          district: (_province2 == null ? void 0 : _province2.listDist) || [],\n          filter: {\n            province: {\n              id: _province2 == null ? void 0 : _province2.id,\n              name: _province2 == null ? void 0 : _province2.name\n            },\n            district: {\n              id: _district2.distId,\n              name: _district2.distName\n            }\n          },\n          store: store.map(function (val) {\n            return _objectSpread(_objectSpread({}, val), {}, {\n              image: encodeURI(\"\" + _App.default.ServerAddress + payload.pathPhoto + val.imagePath)\n            });\n          }) || state.store\n        });\n      }\n  }\n};\n\nvar _default = Reducer;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/ADMINS/Desktop/GreenApp/CoffeXanh/src/screens/root/store/mapStore/MapStore.reducer.js"],"names":["initialState","isRequesting","isLoading","isFail","failMsg","province","district","store","filter","name","Reducer","state","type","payload","Actions","GET_DATA","GET_STORE","GET_DATA_SUCCESS","_province","sort","_district","length","listDist","id","distId","distName","GET_DATA_FAIL","GET_STORE_FAIL","GET_STORE_SUCCESS","provinceId","districtId","p","d","map","val","image","encodeURI","AppConfig","ServerAddress","pathPhoto","imagePath"],"mappings":"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","sourcesContent":["import Actions from './MapStore.action';\r\nimport AppConfig from '../../../../config/App.config';\r\nimport { dynamicSort } from '../../../../utils/AppUtils';\r\n\r\nexport const initialState = {\r\n  isRequesting: false,\r\n  isLoading: false,\r\n  isFail: false,\r\n  failMsg: '',\r\n  province: [],\r\n  district: [],\r\n  store: [],\r\n  filter: {\r\n    province: {\r\n      name: 'N/a',\r\n    },\r\n    district: {\r\n      name: 'N/a',\r\n    },\r\n  },\r\n};\r\n\r\nconst Reducer = (state, { type, payload }) => {\r\n  switch (type) {\r\n    case Actions.GET_DATA:\r\n      return {\r\n        ...state,\r\n        isRequesting: false,\r\n        isLoading: true,\r\n        isFail: false,\r\n      };\r\n    case Actions.GET_STORE:\r\n      return {\r\n        ...state,\r\n        isRequesting: true,\r\n        isFail: false,\r\n      };\r\n    case Actions.GET_DATA_SUCCESS: {\r\n      const _province = payload.sort(dynamicSort('id', 'asc'));\r\n      const _district =\r\n        payload.length > 0\r\n          ? _province[0].listDist.sort(dynamicSort('distId', 'asc'))\r\n          : [];\r\n      return {\r\n        ...state,\r\n        isRequesting: false,\r\n        isLoading: false,\r\n        isFail: false,\r\n        province: payload,\r\n        district: _district,\r\n        filter: {\r\n          province: {\r\n            id: payload.length > 0 ? payload[0].id : -1,\r\n            name: payload.length > 0 ? payload[0].name : 'N/a',\r\n          },\r\n          district: {\r\n            id: _district.length > 0 ? _district[0].distId : -1,\r\n            name: _district.length > 0 ? _district[0].distName : 'N/a',\r\n          },\r\n        },\r\n      };\r\n    }\r\n    case Actions.GET_DATA_FAIL:\r\n    case Actions.GET_STORE_FAIL:\r\n      return {\r\n        ...state,\r\n        isRequesting: false,\r\n        isLoading: false,\r\n        isFail: true,\r\n        failMsg: payload,\r\n      };\r\n    case Actions.GET_STORE_SUCCESS: {\r\n      const { provinceId, districtId, store } = payload;\r\n      const _province = state.province.filter(p => p.id === provinceId)[0];\r\n      const _district = _province?.listDist.filter(\r\n        d => d.distId === districtId,\r\n      )[0] || { distId: -1, distName: 'N/a' };\r\n      return {\r\n        ...state,\r\n        isRequesting: false,\r\n        isLoading: false,\r\n        isFail: false,\r\n        district: _province?.listDist || [],\r\n        filter: {\r\n          province: { id: _province?.id, name: _province?.name },\r\n          district: {\r\n            id: _district.distId,\r\n            name: _district.distName,\r\n          },\r\n        },\r\n        store:\r\n          store.map(val => ({\r\n            ...val,\r\n            image: encodeURI(\r\n              `${AppConfig.ServerAddress}${payload.pathPhoto}${val.imagePath}`,\r\n            ),\r\n          })) || state.store,\r\n      };\r\n    }\r\n  }\r\n};\r\nexport default Reducer;\r\n"]},"metadata":{},"sourceType":"script"}