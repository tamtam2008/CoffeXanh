{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _XModal = _interopRequireDefault(require(\"../../../../../../components/layout/XModal\"));\n\nvar _BaseStyles = require(\"../../../../../../constants/BaseStyles\");\n\nvar _Layout = _interopRequireDefault(require(\"../../../../../../constants/Layout\"));\n\nvar _chooseProduct = _interopRequireDefault(require(\"./chooseProduct.actions\"));\n\nvar _chooseProduct2 = _interopRequireDefault(require(\"./chooseProduct.controller\"));\n\nvar _chooseProduct3 = _interopRequireDefault(require(\"./chooseProduct.reducer\"));\n\nvar _ChooseProductContent = _interopRequireDefault(require(\"./components/ChooseProductContent\"));\n\nvar _ProductDetailContent = _interopRequireDefault(require(\"./components/ProductDetailContent\"));\n\nvar _Colors = _interopRequireDefault(require(\"../../../../../../constants/Colors\"));\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\ADMINS\\\\Desktop\\\\GreenApp\\\\CoffeXanh\\\\src\\\\screens\\\\root\\\\menu\\\\components\\\\productModal\\\\chooseProductModal\\\\ChooseProduct.modal.js\";\n\nvar ChooseProductModal = function ChooseProductModal(_ref) {\n  var id = _ref.id,\n      _ref$footerAction = _ref.footerAction,\n      footerAction = _ref$footerAction === void 0 ? {\n    submitAction: function submitAction() {},\n    cancelAction: function cancelAction() {}\n  } : _ref$footerAction,\n      updateFavorite = _ref.updateFavorite;\n\n  var _useReducer = (0, _react.useReducer)(_chooseProduct3.default.reducer, _chooseProduct3.default.initialState),\n      _useReducer2 = (0, _slicedToArray2.default)(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      isShowDetail = _useState2[0],\n      _showDetail = _useState2[1];\n\n  (0, _react.useLayoutEffect)(function () {\n    if (id !== null) {\n      _chooseProduct2.default.getProductData(dispatch, id);\n    }\n  }, [id]);\n  (0, _react.useEffect)(function () {\n    if (state.isFail) {\n      footerAction.cancelAction();\n    }\n  }, [footerAction, state.isFail]);\n  return _react.default.createElement(_XModal.default, {\n    visible: id !== null,\n    onClose: function onClose() {\n      if (!isShowDetail) {\n        footerAction.cancelAction();\n      } else {\n        _showDetail(false);\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, !state.isRequesting ? !isShowDetail ? _react.default.createElement(_ChooseProductContent.default, {\n    style: [styles.popup],\n    showDetail: function showDetail() {\n      return _showDetail(true);\n    },\n    decreaseQuantity: function decreaseQuantity() {\n      return dispatch({\n        type: _chooseProduct.default.DECREASE_QUANTITY\n      });\n    },\n    increaseQuantity: function increaseQuantity() {\n      return dispatch({\n        type: _chooseProduct.default.INCREASE_QUANTITY\n      });\n    },\n    state: state,\n    footerAction: footerAction,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }) : _react.default.createElement(_ProductDetailContent.default, {\n    style: [_BaseStyles.BaseStyles.baseContainer, styles.popup],\n    state: state,\n    closeAction: function closeAction() {\n      _showDetail(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }) : _react.default.createElement(_reactNative.View, {\n    style: [_BaseStyles.BaseStyles.baseContainer, styles.popup, _reactNative.StyleSheet.flatten(state.isRequesting ? {\n      width: 120\n    } : {})],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNative.ActivityIndicator, {\n    size: 32,\n    color: _Colors.default.tintColor,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  })));\n};\n\nvar _default = ChooseProductModal;\nexports.default = _default;\n\nvar styles = _reactNative.StyleSheet.create({\n  popup: {\n    backgroundColor: '#fff',\n    borderRadius: 5,\n    width: _Layout.default.window.width * 0.9,\n    minHeight: 60\n  }\n});","map":{"version":3,"sources":["C:/Users/ADMINS/Desktop/GreenApp/CoffeXanh/src/screens/root/menu/components/productModal/chooseProductModal/ChooseProduct.modal.js"],"names":["ChooseProductModal","id","footerAction","submitAction","cancelAction","updateFavorite","chooseProductReducer","reducer","initialState","state","dispatch","isShowDetail","showDetail","chooseProductController","getProductData","isFail","isRequesting","styles","popup","type","Actions","DECREASE_QUANTITY","INCREASE_QUANTITY","BaseStyles","baseContainer","StyleSheet","flatten","width","Colors","tintColor","create","backgroundColor","borderRadius","Layout","window","minHeight"],"mappings":"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","sourcesContent":["import React, {\r\n  useEffect,\r\n  useLayoutEffect,\r\n  useReducer,\r\n  useState,\r\n} from 'react';\r\nimport { ActivityIndicator, StyleSheet, View } from 'react-native';\r\nimport XModal from '../../../../../../components/layout/XModal';\r\nimport { BaseStyles } from '../../../../../../constants/BaseStyles';\r\nimport Layout from '../../../../../../constants/Layout';\r\nimport Actions from './chooseProduct.actions';\r\nimport chooseProductController from './chooseProduct.controller';\r\nimport chooseProductReducer from './chooseProduct.reducer';\r\nimport ChooseProductContent from './components/ChooseProductContent';\r\nimport ProductDetailContent from './components/ProductDetailContent';\r\nimport Colors from '../../../../../../constants/Colors';\r\n\r\nconst ChooseProductModal = ({\r\n  id,\r\n  footerAction = {\r\n    submitAction: () => {\r\n    },\r\n    cancelAction: () => {\r\n    },\r\n  },\r\n  updateFavorite,\r\n}) => {\r\n  const [state, dispatch] = useReducer(\r\n    chooseProductReducer.reducer,\r\n    chooseProductReducer.initialState,\r\n  );\r\n  const [isShowDetail, showDetail] = useState(false);\r\n  useLayoutEffect(() => {\r\n    if (id !== null) {\r\n      chooseProductController.getProductData(dispatch, id);\r\n    }\r\n  }, [id]);\r\n  useEffect(() => {\r\n    if (state.isFail) {\r\n      footerAction.cancelAction();\r\n    }\r\n  }, [footerAction, state.isFail]);\r\n  return (\r\n    <XModal\r\n      visible={id !== null}\r\n      onClose={() => {\r\n        if (!isShowDetail) {\r\n          footerAction.cancelAction();\r\n        } else {\r\n          showDetail(false);\r\n        }\r\n      }}>\r\n      {!state.isRequesting ? (\r\n        !isShowDetail ? (\r\n          <ChooseProductContent\r\n            style={[styles.popup]}\r\n            showDetail={() => showDetail(true)}\r\n            decreaseQuantity={() =>\r\n              dispatch({ type: Actions.DECREASE_QUANTITY })\r\n            }\r\n            increaseQuantity={() =>\r\n              dispatch({ type: Actions.INCREASE_QUANTITY })\r\n            }\r\n            state={state}\r\n            footerAction={footerAction}\r\n          />\r\n        ) : (\r\n          <ProductDetailContent\r\n            style={[BaseStyles.baseContainer, styles.popup]}\r\n            state={state}\r\n            closeAction={() => {\r\n              showDetail(false);\r\n            }}\r\n          />\r\n        )\r\n      ) : (\r\n        <View\r\n          style={[\r\n            BaseStyles.baseContainer,\r\n            styles.popup,\r\n            StyleSheet.flatten(state.isRequesting ? { width: 120 } : {}),\r\n          ]}>\r\n          <ActivityIndicator size={32} color={Colors.tintColor}/>\r\n        </View>\r\n      )}\r\n    </XModal>\r\n  );\r\n};\r\n\r\nexport default ChooseProductModal;\r\n\r\nconst styles = StyleSheet.create({\r\n  popup: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: 5,\r\n    width: Layout.window.width * 0.9,\r\n    minHeight: 60,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"script"}